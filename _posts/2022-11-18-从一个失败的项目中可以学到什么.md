---
layout: post
title:  "从一个失败的项目中可以学到什么"
date:   2022-11-18 10:00:00 -0000
categories: Tech
tags: 
---

不管从哪个角度角度看，我上一个经历的项目都算得上失败。经过4年多，项目还没能release，团队里的人员一直在流失，我加入的时候，平常5～10人的团队里只剩两个人。后来进行到项目地后半段，数据移行的时候，发现了一个巨大的设计缺陷，项目被搁置了。4年里公司投入了很多的资源，同事也付出了很多努力，到最后却没产生实质的结果。

项目为什么会变成今天这样子，如果重来一次，做什么可以变得更好呢？这是从加入项目开始，就在我心里的一个问题。一年之后，有了一些答案了。

## 不要一次解决所有问题
一定要**分解！分解！分解！**

这个项目试图重写一个新系统去替代现有的老系统。老系统有10多年的历史，很早前的技术栈，用户和数据庞大，而且上下游依赖复杂，直接面对用户，有很高的[SLA](https://en.wikipedia.org/wiki/Service-level_agreement)要求。新系统用了完全不同的技术栈，从编程语言到架构，数据库，数据结构等等，都不一样。新系统有20个左右的微服务，如果不能同时release，那么一个也不能用。但只release服务程序是不够的，还需要把海量的数据移行到新系统去。而数据移行的难度很大，因为数据量大，存在大量的实时新数据，数据转化的逻辑也复杂。到后来，项目进展举步维艰。走到这一步的很大一个原因就是新系统想一下解决所有老系统的痛点。

一次想解决所有问题，就会出现下面一些问题：
1. **得不到及时的反馈**   
    比如设计的缺陷到了项目非常后期才发现。
2. **不允许犯错**   
    没有人有自信可以同时release 20个服务而没有任何问题，为了保证正确，系统又加了很多单独的测试模块，加了很多rollback的方案，复杂度更高了。可新加的模块又怎么保证正确呢？
3. **质量低**   
    迭代的解决问题，是给下一次的更新一个基础，像是证明过程的每一个步骤，到这一步是正确的，然后再考虑下一步。也像攀岩，如果想一下踩着很多石头，那么哪里也不会到达。
4. **认知负担**  
    很容易想象，不分解问题就需要把整个问题建模在脑子里，这么做某种程度是必要的，但是也是偷懒的，分解不意味着没有大局观，而是把问题放在不同level上去思考。认识负担重也意味着新人需要很长时间才能融入。
5. **士气低下**   
    得不到结果，团队里的人心理上，经济上都得不到满足，士气低下留不住人，恶性循环。

## 不要积累技术负债
技术负债不会消失，不也这种方式偿还，就会以另一种方式。

这是我第一次接触超过10年的老项目，不想用“屎山”来形容它，因为可以从代码里看到以前的成员想写好项目的努力，但是很多人经手过这个项目，明显地有的人会写得不那么好。技术负债一个好的衡量指标是：实现新功能和修改现有代码的难易程度。这个系统的技术负债到了什么程度呢，举个例子，数据库的配置散落在100多个文件里，然后数据库url和用户密码的配置并不一定在同一个文件里，所以更新一个数据地址，你需要付出巨大的努力，还需要去理解业务，写test cases。技术负债到这样的一个地步后，没有人会想去改动老项目，但是负债不会凭空消失。所有的责任都落在了新项目上。

所以我觉得任何一个工程师都应该有的一个品质就是: **Leaving the World a Better Place than How We Found It.** 当然你需要建立足够的认知，知道什么是好的project，这是另外一个话题了。

## 人很重要
这个是个大家都知道的道理，但是在更复杂的项目上你对它的体会就更加深刻了。怎么招到好的人才，并留住他们？

一般大公司都有严格薪资框架，在薪水上能做的其实不多，所以需要在其他方面做得更好一些，让大家在这个项目做得开心。但是这个项目的氛围甚至有点窒息，leader有点Micromanagement，对新来的成员很push，半年时间里，团队里进来又走了4个人。这是一个很大的问题，而且是每个公司都必须面对和解决的问题。

## 要敢于承担风险
悲观地去思考，勇敢地去行动。

leader是个很保守的风格，不愿意承担风险。在思考谋划的时候，这是一个很好的品质，需要尽量考虑所有情况，包括最坏的。但是更重要的是，需要做出决定，每一个方案都有风险，你需要接受他们，然后开始行动。而不是等，苦想一个“完美”的方案。为什么要说“勇敢”呢，因为我看到很多行为背后，是恐惧。这点也反应了[人很重要](#人很重要)。

## Know the Project
关于这点我想说的是，你要尽量地去了解这个项目，从可以找到的任何信息里。一个好的方式就是，多问为什么。只有深入理解了系统，你才能理解什么是重要的，什么才是真正的问题。好的设计不是凭空没有根基的，它一定是解决真实的重要的问题。我的leader 4年多了，对项目的理解还是很肤浅的，我很多时候会很疑惑，为什么要花许多时间精力在这些没什么用的事情上？


# 结语
一个项目的失败会有很多很多的原因，制度上的，管理上的，技术上的，可能还包括运气。 这篇主要关注在那些作为一个程序员，或者一个manager可以影响的部分。项目失败，除了带来收入上的影响以外，对我来说，很重要的遗憾是感受不到那种“make it happen”的满足，当把这段经历写在简历上的时候，也做不到自豪地介绍它。当然也有人并不在意项目的成败，甚至有的场景下还期望失败，这是另一个话题了。

以上的一切有意义的前提就是，我们还想把项目做好。
